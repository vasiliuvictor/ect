<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep vs. Shallow Copy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
    </style>
</head>
<body class="p-12">
<div class="max-w-4xl mx-auto bg-white p-12 rounded-xl shadow-lg">
    <h1 class="text-3xl font-bold text-center mb-6 text-gray-800">Assessment ECT</h1>
    <div class="flex flex-col md:flex-row gap-6">
        <div class="flex-1 bg-gray-100 p-6 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold mb-4 text-gray-700">Approaches:</h2>
            <h3> Method 1 - Define a deepCopy method to change the references of the value</h3>
            <pre><code>
            function deepCopy(obj) {
                if (obj === null || typeof obj !== 'object') {
                    return obj;
                }

                if (obj instanceof Date) {
                    return new Date(obj.getTime());
                }

                if (Array.isArray(obj)) {
                    let newArr = [];
                    for (let i = 0; i < obj.length; i++) {
                        newArr[i] = deepCopy(obj[i]);
                    }
                    return newArr;
                }

                let newObj = {};
                    for (let key in obj) {
                        if (Object.prototype.hasOwnProperty.call(obj, key)) {
                            newObj[key] = deepCopy(obj[key]);
                        }
                     }
                return newObj;
            }
            </code></pre>
            <h3> Method 2 - Using JSON.parse(JSON.stringify(obj)) to create a deep copy</h3>

        </div>
        <div class="flex-1 bg-gray-100 p-6 rounded-lg shadow-md">
            <h2 class="text-xl font-semibold mb-4 text-gray-700">Deep Copy</h2>
            <div class="mb-4">
                <p class="font-medium">Original Object:</p>
                <pre id="originalDeep" class="bg-white p-3 rounded-lg text-sm overflow-auto"></pre>
            </div>
            <div class="mb-4">
                <p class="font-medium">Deep Copy:</p>
                <pre id="deepCopy" class="bg-white p-3 rounded-lg text-sm overflow-auto"></pre>
            </div>
            <button id="deepButton"
                    class="w-full bg-teal-500 text-white py-2 px-4 rounded-lg hover:bg-teal-600 transition-colors">
                Modify Deep Copy
            </button>
        </div>
    </div>

</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {

        function renderObjects(original, deep) {
            document.getElementById('originalDeep').textContent = JSON.stringify(original, null, 2);
            document.getElementById('deepCopy').textContent = JSON.stringify(deep, null, 2);
        }

        function deepCopy(obj) {
            if (obj === null || typeof obj !== 'object') {
                return obj;
            }

            if (obj instanceof Date) {
                return new Date(obj.getTime());
            }

            if (Array.isArray(obj)) {
                let newArr = [];
                for (let i = 0; i < obj.length; i++) {
                    newArr[i] = deepCopy(obj[i]);
                }
                return newArr;
            }

            let newObj = {};
            for (let key in obj) {
                if (Object.prototype.hasOwnProperty.call(obj, key)) {
                    newObj[key] = deepCopy(obj[key]);
                }
            }
            return newObj;
        }

        const originalObject = {
            id: 1,
            name: 'Alice',
            details: {
                age: 30,
                city: 'New York'
            },
            hobbies: ['reading', 'painting']
        };

        let deepCopyObject = deepCopy(originalObject);

        renderObjects(originalObject, deepCopyObject);

        document.getElementById('deepButton').addEventListener('click', () => {
            deepCopyObject.details.age = 35;
            deepCopyObject.hobbies.push('coding');
            renderObjects(originalObject, deepCopyObject);
        });
    });
</script>
</body>
</html>
